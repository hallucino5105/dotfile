### global ###

# screen で言うところの escape
set-option -g prefix C-q
# screen で言うところの scrollback
set-option -g history-limit 9999
# ステータス行の文字コード。特になくても文字化けはしなかった。(v1.2)
set-option -g status-utf8 on
# ステータス行を更新する間隔 (秒)
set-option -g status-interval 5
# ウィンドウ等の番号基準値
set-option -g base-index 1
# ターミナル
set-option -g default-terminal screen-256color
# デフォルトシェル
set-option default-shell /bin/zsh
# copyモードのキーバインドをvi風に
set-window-option -g mode-keys vi
# ウィンドウ名が実行中のコマンド名にする
set-window-option -g automatic-rename on

# 縦画面分割、横画面分割をviライクに割当
bind-key - split-window -v
bind-key | split-window -h

## 分割画面への移動をviライクに割当
#bind-key C-O resize-pane -R
#bind-key C-U resize-pane -D
#bind-key C-I resize-pane -U
#bind-key C-Y resize-pane -L

# prefix + r で設定ファイルを再読み込み
bind-key r source-file ~/.tmux.conf

# prefix + spaceでウィンドウの一覧表示
bind-key Space choose-wi

# 矢印キーでのウィンドウ切り替え
unbind-key -n M-z
unbind-key -n M-x
bind-key -n M-1 prev
bind-key -n M-2 next

# 前回のバッファに切り替え
bind-key C-q last-window

# バッファをクリア
bind-key C-k clear-history
bind-key C send-keys "clear && tmux clear-history" \; send-keys "Enter" 

# ペインの縦横サイズを変更
bind -r H resize-pane -L 2
bind -r J resize-pane -D 2
bind -r K resize-pane -U 2
bind -r L resize-pane -R 2

# 複数ペイン同時操作
bind-key e setw synchronize-panes on
bind-key E setw synchronize-panes off

## ver1
## ステータス行の左に表示する内容。いらない。
#set-option -g status-left ""
## ステータス行の右に表示する内容。コマンドの実行結果も表示できる。
#set-option -g status-right-length 150
##set-option -g status-right "#(uptime | awk -F, '{ print $1\",\"$3; }')"
#set-option -g status-right "#(uptime)"
#set -g status-fg cyan
#set -g status-bg black
#set -g status-attr dim
#set -g pane-active-border-fg blue
#set -g pane-active-border-bg black
#set-window-option -g window-status-attr "underscore"
##set-window-option -g window-status-bg blue
##set-window-option -g window-status-fg green
#set-window-option -g window-status-current-attr "bold"
#set-window-option -g window-status-current-fg white
#set-window-option -g window-status-current-bg blue

# ver2
set -g status-fg colour32
set -g status-bg colour0
set -g pane-active-border-fg cyan
set -g pane-active-border-bg colour0
set -g window-status-current-fg white
set -g window-status-current-bg blue
set -g status-left-length 40
set -g status-left '#[fg=white,bg=black]#H#[fg=white]:#[fg=white][#S#[fg=white]] |#[default]'
set -g status-right '#[fg=black,bg=colour32] [%Y-%m-%d(%a) %H:%M]#[default]'


# tmux-powerline
if "test -f ~/.tmux-powerlinerc" "set -g status-bg colour16"
if "test -f ~/.tmux-powerlinerc" "set-window-option -g window-status-current-format '#[fg=colour16, bg=colour32]⮀#[fg=colour231, bg=colour32] #I ⮁ #W #[fg=colour32, bg=colour16]⮀'"
if "test -f ~/.tmux-powerlinerc" "set-option -g status on"
if "test -f ~/.tmux-powerlinerc" "set-option -g status-interval 3"
if "test -f ~/.tmux-powerlinerc" "set-option -g status-utf8 on"
if "test -f ~/.tmux-powerlinerc" "set-option -g status-justify 'left'"
if "test -f ~/.tmux-powerlinerc" "set-option -g status-left-length 100"
if "test -f ~/.tmux-powerlinerc" "set-option -g status-right-length 120"
if "test -f ~/.tmux-powerlinerc" "set-option -g status-left '#(~/dotfile/.tmux.d/tmux-powerline/powerline.sh left)'"
if "test -f ~/.tmux-powerlinerc" "set-option -g status-right '#(~/dotfile/.tmux.d/tmux-powerline/powerline.sh right)'"


# osxのペーストボードと連携
if "test -f /usr/local/bin/reattach-to-user-namespace" "set-option -g default-command 'reattach-to-user-namespace -l $SHELL'"
if "test -f /usr/local/bin/reattach-to-user-namespace" "bind-key C-y run 'tmux save-buffer - | reattach-to-user-namespace pbcopy'"
if "test -f /usr/local/bin/reattach-to-user-namespace" "bind-key C-p run 'reattach-to-user-namespace pbpaste | tmux load-buffer - && tmux paste-buffer'"

