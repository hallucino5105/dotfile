snippet goarg
abbr global goarg
options head
  package global

  import (
    "log"
  
    flags "github.com/jessevdk/go-flags"
  )
  
  type GlobalArgs struct {
    Verbose bool \`short:"v" long:"verbose" description:"Verbose output"\`
  }
  
  var globalArgs *GlobalArgs
  
  func SetupArgParser() *GlobalArgs {
    globalArgs = new(GlobalArgs)
  
    _, err := flags.Parse(globalArgs)
    if err != nil {
      log.Fatal(err)
    }
  
    return globalArgs
  }
  
  func GetGlobalArgs() *GlobalArgs {
    if globalArgs == nil {
      SetupArgParser()
    }
  
    return globalArgs
  }
